// Collection library under The MIT License (MIT) - Copyright (c) 2015 Brice Leroy <bbrriiccee@gmail.com>
function Collection(e,t){function s(){return n.length}function o(){return n.length===0}function u(){n=[];r={}}function a(e){var t=[];for(var r=i=0;r!==false&&i<n.length;i++){r=e(n[i],i);if(r)t.push(r)}return t}function f(e){var t=[],r=0;a(function(r,i){if(e(r,n,i)){t.push(r)}});return new Collection(t)}function l(e,i){if(arguments.length===1){i=e;e=t}for(var s=0;s<n.length;s++){if(n[s][e]===i){delete r[n[s][t]];n.splice(s,1);s=s-1}}return this}function c(e){var t=[];a(function(n){var r=true;for(var i in e){if(typeof e[i]==="function"){if(!e[i](n[i]))r=false}else if(Array.isArray(e[i])){var s=false;for(var o=0;o<e[i].length;o++){if(e[i][o]===n[i])s=true}r=r&&s}else{if(e[i]!==n[i])r=false}}if(r)t.push(n)});return new Collection(t)}function h(){n.reverse();return this}function p(e,t){var r=[].concat(n);if(t){r.sort(function(n,r){return t(n[e],r[e])})}else{r.sort(function(t,n){var r=t[e];var i=n[e];if(r===i)return 0;if(i===[i,r].sort()[0])return 1;return-1})}return Collection(r)}function d(e,n){if(arguments.length===1||e===t){return r[e]}var i=null;a(function(t){if(t.hasOwnProperty(e)&&t[e]==n){i=t;return false}});return i}function v(e){e=[].concat(e);var i;for(var s=0;s<e.length;s++){i=e[s];l(i[t]);n.push(i);r[i[t]]=i}}function m(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}function g(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e.replace(/[xy]/g,m)}var t=t||"id";var n=[];var r={};if(e){v(e)}return{uuid:g,isEmpty:o,empty:u,size:s,models:n,add:v,filter:f,each:a,where:c,sort:p,get:d,remove:l,reverse:h}}
